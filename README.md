# Tens-of-thousands-of-messages-pushed
千万级WebSocket消息推送

### 技术复杂度分析
- 在线人数: 100万
- 发送消息: 1000条/秒
- 推送频率: 100万 * 1000条/秒 = 10亿条/秒
- N个业务推送频率: N * 10亿条/秒

### 推模式与拉模式
- 拉模式
    - 数据更新频率低,大多数请求是无效的
    - 在线用户数多,服务端查询负载高
    - 定时轮询拉取,无法满足时效性要求
- 推模式
    - 仅在数据更新时才需要推送
    - 需要维护大量的在线长连接
    - 数据更新立即推送,高时效性
- 基于WebSocket协议
    - 浏览器支持socket编程,轻松维持服务端长连接
    - 基于TCP可靠传输之上的协议,无需关系通讯细节
    - 提供高度抽象编程接口,业务才发成本较低
    
### 服务端技术选项
- NodeJS
    - 单线程模型,推送性能有效
- C/C++
    - TCP通讯,WebSocket协议实现成本高
- Go
    - 多线程,基于协程模型并发
    - 成熟的WebSocket标准库,不需造轮子
    